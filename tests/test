#!/bin/bash
#
# wrapper for sheep tests
#



# cd into my dir
cd $(dirname $0)

source ../library/core && colors

failed_tests=0
tests_to_run=(
    "false"
    "true"
    "core"
    "modules"
    "false"
  )

run_test() {
  eval ./$1
  if test $? -eq 0; then 
    echo -e "${txtgrn}\t$test${txtrst}"
  else 
    echo -e "${txtred}\t$test${txtrst}"
    failed_tests=$((failed_tests + 1))
  fi 
}

echo 
echo "${txtblu}runing ${#tests_to_run[@]} tests:${txtrst}"
echo 

for test in ${tests_to_run[@]}; do 
  run_test $test
done

echo 
echo "${txtblu}ran ${#tests_to_run[@]} tests:${txtrst}"
echo
echo -e "${txtred}  $failed_tests \tfailed (two are supposed to fail)" 
echo -e "${txtgrn}  $(( ${#tests_to_run[@]} - failed_tests )) \tpassed"
echo 

exit $failed_tests
